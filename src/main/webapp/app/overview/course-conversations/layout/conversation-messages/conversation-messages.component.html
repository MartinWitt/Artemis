<div class="row p-3 justify-content-center" *ngIf="course">
    <div class="justify-content-center">
        <div class="row justify-content-center">
            <div class="row ps-0">
                <!-- search bar -->
                <div class="input-group col-10 px-0 mb-4">
                    <input name="searchText" [(ngModel)]="searchText" class="form-control" placeholder="{{ 'artemisApp.messages.searchBarPlaceholder' | artemisTranslate }}" />
                    <jhi-button [btnType]="ButtonType.SECONDARY" [icon]="faTimes" (onClick)="searchText = ''; onSearch()"></jhi-button>
                    <jhi-button class="ms-1" [icon]="faSearch" (onClick)="onSearch()"></jhi-button>
                </div>
                <div class="bold-line row mt-1 mb-2"></div>
                <!-- ToDo: Add Search Result Text: Found XX Messages containing bla bla -->
            </div>
        </div>
        <div class="row">
            <!-- loading messages -->
            <div *ngIf="isFetchingPosts" class="envelope">
                <fa-icon size="3x" [icon]="faCircleNotch" [spin]="true"></fa-icon>
            </div>
            <!-- no message exist -->
            <div *ngIf="!isFetchingPosts && (totalNumberOfPosts === 0 || !_activeConversation)" class="envelope">
                <fa-icon size="5x" [icon]="faEnvelope"></fa-icon>
            </div>
            <!-- list of messages -->
            <div
                *ngIf="_activeConversation"
                id="scrollableDiv"
                #container
                class="{{ totalNumberOfPosts !== 0 ? 'posting-infinite-scroll-container' : '' }}"
                infinite-scroll
                [scrollWindow]="false"
                (scrolledUp)="fetchNextPage()"
            >
                <jhi-posting-thread
                    #postingThread
                    *ngFor="let post of posts; trackBy: postsTrackByFn"
                    [post]="post"
                    [showAnswers]="false"
                    [readOnlyMode]="!!getAsChannel(_activeConversation)?.isArchived"
                    [isCourseMessagesPage]="true"
                    (openThread)="setPostForThread($event)"
                >
                </jhi-posting-thread>
            </div>
            <jhi-message-inline-input
                *ngIf="_activeConversation && newPost && !getAsChannel(_activeConversation)?.isArchived"
                [posting]="newPost"
                (onCreate)="createEmptyPost(); scrollToBottomOfMessages()"
            >
            </jhi-message-inline-input>
        </div>
    </div>
</div>
