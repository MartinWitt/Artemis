<div class="sidebar-section">
    <!-- Todo: Do not hide when popover is open-->
    <div class="section-header" (mouseover)="isHover = true" (mouseout)="isHover = false" (click)="isCollapsed = !isCollapsed" [attr.aria-expanded]="!isCollapsed">
        <div>
            <fa-icon [icon]="faChevronRight" [rotate]="!isCollapsed ? 90 : undefined"></fa-icon>
            <span>{{ label }}</span>
        </div>
        <div *ngIf="sectionButtons" [hidden]="!isHover" (click)="$event.stopPropagation()">
            <ng-template [ngTemplateOutlet]="sectionButtons" [ngTemplateOutletContext]="{}"></ng-template>
        </div>
    </div>
    <div #collapse="ngbCollapse" [(ngbCollapse)]="isCollapsed">
        <ul class="conversation-list" *ngIf="conversations && conversations.length">
            <li
                *ngFor="let conversation of conversations; trackBy: conversationsTrackByFn"
                class="conversation-list-item"
                [class.selected]="activeConversation && activeConversation.id === conversation.id"
                (click)="conversationSelected.emit(conversation)"
            >
                <span class="conversation-list-item-user">
                    <ng-container *ngIf="conversation.type === 'CHANNEL'">
                        <jhi-channel-icon [isPublic]="conversation.isPublic!"></jhi-channel-icon>
                    </ng-container>
                    {{ conversationService.getNameOfConversation(conversation) }}
                </span>
                <span *ngIf="isConversationUnread(conversation)">
                    <fa-icon [icon]="faMessage"></fa-icon>
                </span>
            </li>
        </ul>
    </div>
</div>
